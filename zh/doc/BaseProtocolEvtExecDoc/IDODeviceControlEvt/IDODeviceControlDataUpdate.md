### 设备通知APP数据更新


**App收到的json字段**：

| 字段名      | 字段类型 | 字段说明                                                     |
| ----------- | -------- | ------------------------------------------------------------ |
| data_type   | int      | [跳转到详情](#datatype)                                      |
| notify_type | int      | [跳转到详情](#notifytype)                                    |
| msg_ID      | int      | 预留                                                         |
| msg_notice  | int      | 预留                                                         |
| error_index | int      | [跳转到详情](#errorindex)<br />固件错误码返回<br />非0是错误,具体看固件错误码<br />app收到非0错误,发送获取设备0x21 11的命令采集flash数据 |

`示例：`

```c
{
    "data_type":1,
    "notify_type":0,
    "msg_ID":0,
    "msg_notice":0,
    "error_index":0
}
```



<span id=datatype>**`data_type`**</span>

| 30     | 通知app运动结束（作用于拦截表盘传输同27）                    |      |
| ------ | ------------------------------------------------------------ | ---- |
| 31     | 固件重启发送通知给app  （app收到通知需要获取固件版本信息）   |      |
| 32     | 设备空闲时（没有使用aleax），需要上报通知给app（时间间隔为1小时） |      |
| 33     | 固件整理空间完成通知app继续下传表盘文件                      |      |
| 34     | 固件通知app结束寻找手环指令 （对应6.3寻找手环）              |      |
| 35     | 固件进入省电模式通知app                                      |      |
| 36     | 固件退出省电模式通知app                                      |      |
| ~~37~~ | ~~固件通知请求app下发设置gps热启动参数(废弃)~~               |      |
| 38     | 固件传输原始数据完成，通知app获取特性向量信息                |      |
| 39     | 固件通知app，固件血压校准失败(固件退出测量界面/检测失败/检测超时/未佩戴) |      |
| 40     | 固件传输原始数据完成，没有特性向量信息，通知app数据采集结束  |      |
| 41     | v3健康数据同步单项数据完成通知 (android 内部使用）           |      |
| 42     | 固件整理gps数据空间完成通知app下发gps文件                    |      |
| 43     | 固件升级EPO.dat文件失败，通知app再次下发一次该文件           |      |
| 44     | 固件升级EPO.dat文件成功                                      |      |
| 45     | 固件升级GPS失败，通知app重新传输                             |      |
| 46     | 固件升级GPS成功                                              |      |
| 47     | 发起运动时, 固件GPS异常，通知app                             |      |
| 48     | 固件润丰外设信息更新，通知app获取                            |      |
| 49     | 固件通知用户取消ble和手表配对,app弹窗处理                    |      |
| 50     | 固件通知app bt配对完成                                       |      |
| 51     | 固件设置运动排序,通知app获取运动排序信息                     |      |
| 52     | 固件全天步数目标参数有更改,通知app获取全天步数目标(0208)     |      |
| 53     | 固件通知app固件进入血压校准界面                              |      |
| 54     | 固件自动识别开关状态更新,通知app获取运动自动识别开关状态(02EA) |      |



<span id=notifytype>**`notify_type(按位获取)`**</span>

| 值   | 说明                                                      | 位   |
| ---- | --------------------------------------------------------- | ---- |
| 1    | 闹钟已经修改                                              | bit0 |
| 2    | 固件过热异常告警                                          | bit1 |
| 4    | 亮屏参数有修改（02 b0）                                   | bit2 |
| 8    | 抬腕参数有修改（02 b1）                                   | bit3 |
| 16   | 勿擾模式获取（02 30）                                     | bit4 |
| 32   | 手机音量的下发（03  0xE3）（删除），app音量修改，直接下发 | bit5 |

说明：心率模式复用V3的心率模式修改 data_type = 2的时候，app发起获取心率命令



<span id=errorindex>**`error_index`**</span>

| 值   | 错误类型     | 备注              |
| ---- | ------------ | ----------------- |
| 0    | 没有错误     |                   |
| 1    | ACC          | 1~100是固件错误   |
| 2    | PPG          |                   |
| 3    | TP           |                   |
| 4    | FLASH        |                   |
| 5    | 过热（PPG）  |                   |
| 6    | 气压         |                   |
| 7    | GPS          |                   |
| 8    | 地磁         |                   |
|      |              |                   |
| 100  | 开门狗复位   | 100~200复位日志码 |
| 101  | 上电复位     |                   |
| 102  | 软件错位复位 |                   |
| 103  | OTA复位      |                   |
| 104  | 用户主动复位 |                   |
| 105  | 低电关机复位 |                   |
